{% extends "01_base.html" %}
{% block content %}

<div class="container mt-5">
  <h2 class="fw-bold mb-4">⚡ Crea Nuova Promo Lampo</h2>

  <form method="POST" enctype="multipart/form-data" class="card p-4 shadow-sm rounded-4">
    <!-- Nome Prodotto -->
    <div class="mb-3">
      <label for="nome" class="form-label">📝 Nome Prodotto</label>
      <input type="text" id="nome" name="nome" class="form-control" placeholder="Inserisci nome prodotto" required>
    </div>

    <!-- Prezzo -->
    <div class="mb-3">
      <label for="prezzo" class="form-label">💶 Prezzo</label>
      <input type="number" step="0.01" id="prezzo" name="prezzo" class="form-control" placeholder="0.00" required>
    </div>

    <!-- Immagine Prodotto -->
    <div class="mb-3">
      <label for="immagine" class="form-label">🖼 Immagine Prodotto</label>
      <input type="file" id="immagine" name="immagine" class="form-control" accept="image/*" required onchange="previewImage(this, 'preview-immagine')">
      <img id="preview-immagine" src="{{ url_for('static', filename='no-image.png') }}" alt="Anteprima Immagine" class="img-fluid mt-2" style="max-height: 200px;">
    </div>

    <!-- Sfondo Volantino -->
    <div class="mb-3">
      <label for="sfondo" class="form-label">🖼 Sfondo Volantino</label>
      <input type="file" id="sfondo" name="sfondo" class="form-control" accept="image/*" required onchange="previewImage(this, 'preview-sfondo')">
      <img id="preview-sfondo" src="{{ url_for('static', filename='no-image.png') }}" alt="Anteprima Sfondo" class="img-fluid mt-2" style="max-height: 200px;">
    </div>

    <!-- Pulsanti -->
    <div class="d-flex gap-2">
      <button type="submit" class="btn btn-success">💾 Salva Promo Lampo</button>
      <a href="{{ url_for('lista_volantini_completa') }}" class="btn btn-secondary">↩ Torna Indietro</a>
    </div>
  </form>
</div>

<!-- Anteprima immagini -->
<script>
function previewImage(input, previewId) {
  const preview = document.getElementById(previewId);
  if (input.files && input.files[0]) {
    const reader = new FileReader();
    reader.onload = function(e) {
      preview.src = e.target.result;
    }
    reader.readAsDataURL(input.files[0]);
  } else {
    preview.src = "{{ url_for('static', filename='no-image.png') }}";
  }
}
</script>

{% endblock %}
